//
//  HNCFHomeDetailVIew.m
//  HNCF
//
//  Created by houshangyong on 15/12/20.
//  Copyright © 2015年 hsy. All rights reserved.
//

#import "HNCFHomeDetailVIew.h"
#import "HNCFCommmon.h"

@interface HNCFHomeDetailVIew ()
@property (nonatomic ,strong) UILabel *nameLabel;
@property (nonatomic ,strong) UIView *detailView;
@property (nonatomic ,strong) UILabel *titleLabel;
@property (nonatomic ,strong) UILabel *detailLabel;
@property (nonatomic ,strong) UIImageView *healthImage;

@end

@implementation HNCFHomeDetailVIew
- (UILabel *)nameLabel
{
    if (!_nameLabel) {
        _nameLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 20, self.width, 30)];
        _nameLabel.textAlignment = NSTextAlignmentCenter;
        _nameLabel.font = [UIFont systemFontOfSize:16.0f];
    }
    return _nameLabel;
}
- (UILabel *)titleLabel
{
    if (!_titleLabel) {
        _titleLabel = [[UILabel alloc]initWithFrame:CGRectZero];
        _titleLabel.textAlignment = NSTextAlignmentCenter;
        _titleLabel.textColor = [UIColor darkTextColor];
        _titleLabel.font = [UIFont systemFontOfSize:14];
    }
    return _titleLabel;
}
- (UIView *)detailView
{
    if (!_detailView) {
        _detailView = [[UILabel alloc]initWithFrame:CGRectZero];
        _detailView.layer.borderWidth = 1.0;
        _detailView.layer.borderColor = [[UIColor lightGrayColor]CGColor];
    }
    return _detailView;
}
- (UILabel *)detailLabel
{
    if (!_detailLabel) {
        _detailLabel = [[UILabel alloc]initWithFrame:CGRectZero];
        _detailLabel.textAlignment = NSTextAlignmentCenter;
        _detailLabel.font = [UIFont systemFontOfSize:12.0f];
        _detailLabel.textColor = [UIColor darkTextColor];

    }
    return _detailLabel;
}
- (UIImageView *)healthImage
{
    if (!_healthImage) {
        _healthImage = [[UIImageView alloc]initWithFrame:CGRectZero];
    }
    return _healthImage;
}
- (instancetype)initWithFrame:(CGRect)frame {
    if (self=[super initWithFrame:frame]) {
        self.backgroundColor = [UIColor whiteColor];
        [self addSubview:self.nameLabel];
        [self.detailView addSubview:self.titleLabel];
        [self addSubview:self.detailView];
        [self.detailView addSubview:self.detailLabel];
        [self addSubview:self.healthImage];
        
        
        
    }
    return self;
}

- (void)HNCFHomeDetailVIew:(id)model;
{
    
    self.nameLabel.frame = CGRectMake(0, 10, self.width, 30);
    [self.detailLabel setNumberOfLines:0];
    self.detailLabel.lineBreakMode = NSLineBreakByCharWrapping;
    // 测试字串
    NSString *s = [model objectForKey:@"description"];
    UIFont *font = [UIFont fontWithName:@"Arial" size:12];
    //设置一个行高上限
    CGSize size = CGSizeMake(320,2000);
    //计算实际frame大小，并将label的frame变成实际大小
    CGSize labelsize = [s sizeWithFont:font constrainedToSize:size lineBreakMode:NSLineBreakByCharWrapping];
    self.detailLabel.frame = CGRectMake(10, 25, self.width-40, labelsize.height);
    self.detailLabel.text = s;
    self.titleLabel.frame = CGRectMake(0, 5, self.width, 20);
    self.detailView.frame = CGRectMake(10, self.nameLabel.maxY+5, self.width-20, self.detailLabel.height+30);
    self.nameLabel.text = [NSString stringWithFormat:@"%@",[model objectForKey:@"title"]];
    self.titleLabel.text = [NSString stringWithFormat:@"%@",[model objectForKey:@"title"]];
    self.healthImage.frame = CGRectMake(10, self.detailView.maxY+10, self.width-20, self.width/2);
    [self.healthImage sd_setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",HNCF_IMAGE_URL,[model objectForKey:@"sd_healththumb"]]] placeholderImage:nil];
}
@end
